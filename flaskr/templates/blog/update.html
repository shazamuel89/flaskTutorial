{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Edit "{{ post['title'] }}"{% endblock %}</h1>
{% endblock %}

{% block content %}

<form method="post">
  <label for="title">Title</label>
  <input name="title" id="title" value="{{ request.form['title'] or post['title'] }}" required>

  <label for="body">Body</label>
  <textarea name="body" id="body">{{ request.form['body'] or post['body'] }}</textarea>

  <input type="submit" class="btn btn-primary" value="Save">
</form>

<hr>

<!-- Trigger button for modal -->
<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#confirmDeleteModal">
  Delete
</button>

<!-- Modal -->
<div class="modal fade" id="confirmDeleteModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        Are you sure you want to permanently delete this post?
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
        <form action="{{ url_for('blog.delete', id=post['id']) }}" method="post" class="d-inline">
          <button type="submit" class="btn btn-danger">Yes, delete</button>
        </form>
      </div>

    </div>
  </div>
</div>

{% endblock %}
